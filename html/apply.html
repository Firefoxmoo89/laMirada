<script>document.title += " - Apply"</script>

<section><div>
  <h1 class="articleTitle">Application Criteria and Process</h1>
  <p>Each adult must complete a separate application, submit a photo ID (from any country or state), and provide proof of income (i.e. pay stubs, bank statements, employment letters, tax returns).<br>A co-signer or higher deposit may be if the applicant has insufficient landlord, credit or income references.<br>We will not discriminate due to race, ethnicity, family / marital status, age, disability, source of income, or religious / sexual beliefs.<br>Until execution & delivery of lease agreement to applicant, we reserve the right to reject or deny this application for any reason, such as: Application is unsigned, incomplete, or contains fraudulent / misleading informtion; low wage-to-rent ratio; collections, liens, judgments, or bankruptcy; poor rental references; recent evictions; unstable or unverifiable income; pattern of criminal behavior or abusive attitude.<br>Approved applicants will have 2 hrs from notification to sign a rental agreement & pay full deposit, or we will proceed with the next qualified applicant. Applicant has no rights to the property until a rental agreement is signed by both parties & the account charges are fully paid.</p> 
  <div><input required type="checkbox" id="agreeProcess" name="agreeProcess" class="simple"><label for="agreeProcess">I have read and agree to the terms and conditions above</label></div>
</div></section><section class="colored"><div>	
  <h1 class="articleTitle">Applicant's Information</h1>
  <div class="flexrow" style="margin:0 5% 0 5%;width:90%">
    <div>
      <input required type="text" id="firstName" name="firstName" placeholder="John">
      <label for="firstName">First Name</label>
    </div><div>
      <input required type="text" id="lastName" name="lastName" placeholder="Doe">
      <label for="lastName">Last Name</label>
    </div>
  </div><div class="flexrow" style="margin:0 5% 0 5%;width:90%">
    <div>
      <input required type="tel" id="phoneNumber" name="phoneNumber" placeholder="(555) 555-5555">
      <label for="phoneNumber">Phone Number</label>
    </div><div style="flex-grow:10">
      <input required type="email" id="emailAddress" name="emailAddress" placeholder="example@email.com">
      <label for="emailAddress">Email Address</label>
    </div>
  </div>
    <label for="id" style="display:inline">Provide a copy of ID</label>
    <input required type="file" accept="image/*" id="id" name="id" multiple>
</div></section><section><div>	
  <input required type="text" id="otherAdults" name="otherAdults" placeholder="Jane Doe">
  <label for="otherAdults">Names of Other Adults</label>
  <div class="flexrow" style="margin:0 5% 0 5%;width:90%">
    <div>
      <input required type="number" id="numOfPets" name="numOfPets">
      <label for="numOfPets">Number of Pets</label>
    </div><div>
      <input required type="number" id="numOfKids" name="numOfKids">
      <label for="numOfKids">Number of Children</label>
    </div><div>
      <input required type="number" id="numOfDruggies" name="numOfDruggies">
      <label for="numOfDruggies"># That Smoke</label>
    </div>
  </div>
  <input required type="text" id="petType" name="petType">
  <label for="petType">Pet Type(s)</label>
</div></section><section class="colored"><div>	
  <label for="tenantScale">On a scale of 1-10, how are you as a tenant?
    <input required type="range" id="tenantScale" name="tenantScale" min="0" max="10" style="margin-right: 20px">
    <span id="tenantScaleDisplay">5</span>
  </label><div class="flexrow" style="margin:0 5% 0 5%;width:90%">
    <div>
      <input required type="number" id="savedAmount" name="savedAmount" class="money">
      <label for="savedAmount">How much do you have saved for move-in costs?</label>
    </div><div>
      <input required type="date" id="moveDate" name="moveDate">
      <label for="moveDate">Desired Move-in Date:</label>
    </div>
  </div>
  <textarea id="hearAboutUs" name="hearAboutUs" spellcheck="true"></textarea>
  <label for="hearAboutUs">How did you hear about us?</label>
</div></section><section><div>	
  <h1 class="articleTitle">Applicant's Rental History</h1>
  <h3 class="articleTitle">Most Recent Rental<br><span style="font-size:.9rem">(Use parents home if necessary)</span></h3>
  <input required type="text" id=currentStreet" name="currentStreet"> <!-- Needs JS inputs start-->
  <label for="currentStreet">Street Address</label>
  <div class="flexrow" style="margin:0 5% 0 5%;width:90%">
      <div style="flex-grow:10">
        <input required type="text" id="currentCity" name="currentCity">
        <label for="currentCity">City</label>
      </div><div>
        <input required type="text" id="currentState" name="currentState">
        <label for="currentState">State</label>
      </div>
    </div><div class="flexrow" style="margin:0 5% 0 5%;width:90%">
      <div>
        <input required type="text" id="currentZip" name="currentZip">
        <label for="currentZip">Zip Code</label>
      </div><div style="flex-grow:15">
        <input required type="text" id="currentCountry" name="currentCountry">
        <label for="currentCountry">Country</label>
      </div>
    </div>  <!-- Needs JS inputs end -->  <!-- Needs JS removed for "currentAddress" -->
    <div class="flexrow" style="margin:0 5% 0 5%;width:90%">
      <div>
        <input required type="number" id="currentMonthlyRent" name="currentMonthlyRent" class="money">
        <label for="currentMonthlyRent">Current Monthly Rent</label>
      </div><div>
        <input required type="date" id="currentMovedIn" name="currentMovedIn">
        <label for="currentMovedIn">Date Moved In</label>
      </div><div>
        <input type="date" id="currentMovedOut" name="currentMovedOut">
        <label for="currentMovedOut">Date Moved Out</label>
      </div>
    </div>
    <div class="flexrow" style="margin:0 5% 0 5%;width:90%">
      <div>
        <input required type="text" id="currentLandlord" name="currentLandlord">
        <label for="currentLandlord">Landlord Name</label>
      </div><div>
        <input required type="tel" id="currentLandlordPhone" name="currentLandlordPhone">
        <label for="currentLandlordPhone">Landlord Phone</label>
      </div>
    </div>
    <textarea required id="currentLeave" name="currentLeave"></textarea>
    <label for="currentLeave">Reason for Leaving</label>
    <label for="rentalStatement">Current Rental Statement (If possible, please provide):
      <input type="file" accept="image/*" id="rentalStatement" name="rentalStatement" multiple>
    </label><div class="label">
      <input type="checkbox" id="extraRental" name="extraRental" class="simple" data-submitform="ignore" onchange="toggleDisplay('div#priorRental')"><label for="extraRental">Add Second Rental (please fill if applicable)</label> <!-- Needs JS -->
    </div>
  <div id="priorRental" style="display:none"><h3 class="articleTitle">Prior Rental</h3>
    <input required type="text" id=priorStreet" name="priorStreet"> <!-- Needs JS inputs start-->
  <label for="priorStreet">Street Address</label>
  <div class="flexrow" style="margin:0 5% 0 5%;width:90%">
      <div style="flex-grow:10">
        <input required type="text" id="priorCity" name="priorCity">
        <label for="priorCity">City</label>
      </div><div>
        <input required type="text" id="priorState" name="priorState">
        <label for="priorState">State</label>
      </div>
    </div><div class="flexrow" style="margin:0 5% 0 5%;width:90%">
      <div>
        <input required type="text" id="priorZip" name="priorZip">
        <label for="priorZip">Zip Code</label>
      </div><div style="flex-grow:15">
        <input required type="text" id="priorCountry" name="priorCountry">
        <label for="priorCountry">Country</label>
      </div>
    </div>  <!-- Needs JS inputs end -->  <!-- Needs JS removed for "priorAddress" -->
    <div class="flexrow" style="margin:0 5% 0 5%;width:90%">
      <div>
        <input required type="number" id="priorMonthlyRent" name="priorMonthlyRent" class="money">
        <label for="priorMonthlyRent">Prior Monthly Rent</label>
      </div><div>
        <input required type="date" id="priorMovedIn" name="priorMovedIn">
        <label for="priorMovedIn">Date Moved In</label>
      </div><div>
        <input type="date" id="priorMovedOut" name="priorMovedOut">
        <label for="priorMovedOut">Date Moved Out</label>
      </div>
    </div>
    <div class="flexrow" style="margin:0 5% 0 5%;width:90%">
      <div>
        <input required type="text" id="priorLandlord" name="priorLandlord">
        <label for="priorLandlord">Landlord Name</label>
      </div><div>
        <input required type="tel" id="priorLandlordPhone" name="priorLandlordPhone">
        <label for="priorLandlordPhone">Landlord Phone</label>
      </div>
    </div>
    <label for="priorLeave">Reason for Leaving:
      <textarea required id="priorLeave" name="priorLeave"></textarea>
    </label>
  </div>
</div></section><section class="colored"><div>	
  <h1 class="articleTitle">Applicant's Income History</h1>
  <h3 class="articleTitle">Income 1</h3>
    <label for="companyName">Employer/Company Name:
      <input required type="text" id="companyName" name="companyName">
    </label><label for="occupation">Occupation/Industry:
      <input required type="text" id="occupation" name="occupation">
    </label><label for="jobLocation">City, State
      <input required type="text" id="jobLocation" name="jobLocation">
    </label><label for="position">Position:
      <input required type="text" id="position" name="position">
    </label><label for="supervisorName">Supervisor Name:
      <input required type="text" id="supervisorName" name="supervisorName">
    </label><label for="supervisorPhone">Supervisor Phone
      <input required type="tel" id="supervisorPhone" name="supervisorPhone">
    </label><label for="schedule">Hours worked per Week
      <input required type="number" id="schedule" name="schedule">
    </label><label for="startDate">Start Date:
      <input required type="date" id="startDate" name="startDate">
    </label><label for="endDate">End Date:
      <input required type="date" id="endDate" name="endDate">
    </label><label for="monthlySalary">Monthly Salary:
      <input required type="number" id="monthlySalary" name="monthlySalary" class="money">
    </label><label for="incomeStatement">Proof of Income (ex. w2, pay stubs, etc):
      <input required type="file" accept="image/*" id="incomeStatement" name="incomeStatement" multiple>
    </label><div class="label">
      <input type="checkbox" id="extraIncome" name="extraIncome" class="simple" data-submitform="ignore" onchange="toggleDisplay('div#otherIncome')"><label for="extraIncome">Add Second Income (please fill if applicable)</label>
    </div>
  <div id="otherIncome" style="display:none"><h3 class="articleTitle">Income 2</h3>
    <label for="companyName1">Employer/Company Name:
      <input type="text" id="companyName1" name="companyName1">
    </label><label for="occupation1">Occupation/Industry:
      <input type="text" id="occupation1" name="occupation1">
    </label><label for="jobLocation1">City, State
      <input type="text" id="jobLocation1" name="jobLocation1">
    </label><label for="position1">Position:
      <input type="text" id="position1" name="position1">
    </label><label for="supervisorName1">Supervisor Name:
      <input type="text" id="supervisorName1" name="supervisorName1">
    </label><label for="supervisorPhone1">Supervisor Phone:
      <input type="tel" id="supervisorPhone1" name="supervisorPhone1">
    </label><label for="schedule1">Hours worked per Week
      <input type="number" id="schedule1" name="schedule1">
    </label><label for="startDate1">Start Date:
      <input type="date" id="startDate1" name="startDate1">
    </label><label for="endDate1">End Date:
      <input type="date" id="endDate1" name="endDate1">
    </label><label for="monthlySalary1">Monthly Salary:
      <input type="number" id="monthlySalary1" name="monthlySalary1" class="money">
    </label>
  </div>
</div></section><section><div>	
  <label for="otherIncome">Other Income:
    <input required type="text" id="otherIncome" name="otherIncome">
  </label><label for="otherIncomeAmount">Other Monthly Income Amount
    <input required type="number" id="otherIncomeAmount" name="otherIncomeAmount" class="money">
  </label><p>Total Current Monthly Income from All Income Sources: <span style="font-size:1.5em;font-weight:bold">$<span id="totalIncome"></span></span></p>
</div></section><section class="colored"><div>	
  <h1>Other Information</h1>
  <label for="parking">How many parking spaces do you need?
    <input required type="number" id="parking" name="parking">
  </label><div class="label">Do you work nights or odd hours?
    <input required type="radio" id="oddHoursTrue" name="oddHours" value="Yes"><label for="oddHoursTrue" class="inline">Yes</label>
    <input required type="radio" id="oddHoursFalse" name="oddHours" value="No"><label for="oddHoursFalse" class="inline">No</label>
  </div><div class="label">Do you have frequent overnight guests?
    <input required type="radio" id="overnightGuestsTrue" name="overnightGuests" value="Yes"><label for="overnightGuestsTrue" class="inline">Yes</label>
    <input required type="radio" id="overnightGuestsFalse" name="overnightGuests" value="No"><label for="overnightGuestsFalse" class="inline">No</label>
  </div><div class="label">Do you have issues with community rules?
    <input required type="radio" id="againstRulesTrue" name="againstRules" value="Yes"><label for="againstRulesTrue" class="inline">Yes</label>
    <input required type="radio" id="againstRulesFalse" name="againstRules" value="No"><label for="againstRulesFalse" class="inline">No</label>
  </div><label for="lateBills">In the last three years, how often did you pay bills late?
    <input required type="text" id="lateBills" name="lateBills">
  </label><div class="label">Have you ever been evicted or asked to move out?
    <input required type="radio" id="evictedTrue" name="evicted" value="Yes"><label for="evictedTrue" class="inline">Yes</label>
    <input required type="radio" id="evictedFalse" name="evicted" value="No"><label for="evictedFalse" class="inline">No</label>
  </div><div class="label">Have you ever been sued for bills or been in collections
    <input required type="radio" id="suedTrue" name="sued" value="Yes"><label for="suedTrue" class="inline">Yes</label>
    <input required type="radio" id="suedFalse" name="sued" value="No"><label for="suedFalse" class="inline">No</label>
  </div><div class="label">Have you informed your current landlord that you are moving?
    <input required type="radio" id="informedLandlordTrue" name="informedLandlord" value="Yes"><label for="informedLandlordTrue" class="inline">Yes</label>
    <input required type="radio" id="informedLandlordFalse" name="informedLandlord" value="No"><label for="informedLandlordFalse" class="inline">No</label>
  </div>
</div></section><section><div>	
  <h1 class="articleTitle">Applicants Emergency Contacts and Personal References</h1>
  <h3 class="articleTitle">Person 1</h3>
    <label for="person1Name">Name:
      <input required type="text" id="person1Name" name="person1Name">
    </label><label for="person1Phone">Phone:
      <input required type="tel" id="person1Phone" name="person1Phone">
    </label><label for="person1Relationship">Relationship:
      <input required type="text" id="person1Relationship" name="person1Relationship">
    </label>
  <h3 class="articleTitle">Person 2</h3>
    <label for="person2Name">Name:
      <input required type="text" id="person2Name" name="person2Name">
    </label><label for="person2Phone">Phone:
      <input required type="tel" id="person2Phone" name="person2Phone">
    </label><label for="person2Relationship">Relationship:
      <input required type="text" id="person2Relationship" name="person2Relationship">
    </label>
</div></section><section class="colored"><div>	
  <h1 class="articleTitle">Authorization of Screening</h1>
  <p>I, the undersigned, hereby declare that the above information is true and correct, and has been made for the purpose of applying for residency. I acknowledges that false or omitted information may constitute as grounds for rejection of this application, termination of occupancy, and/or forfeiture of fees or deposits & may constitute as a criminal offense under the laws of this state.<br>I do hereby authorize a full consumer and characture investigation to evaluate my tenancy, including but not limited to contacting past and present landlords, employers, public records, and any other sources deemed necessary. I authorize said parties the release of information requested, & relinquish/hold harmless all parties for any & all damages or liabilities which might result through obtaining/providing said information.<br>In addition, I do hereby declare that a photocopy or pdf email of this document shall be as valid as the original, and will suffice as an authorized signature to release information on all my financial accounts related to this transaction. This investigation is for resident screening purposes only, and will remain private, secure, & confidential for all parties involved.</p>
  <div><input required type="checkbox" id="signAgreement" name="signAgreement" class="simple"><label for="signAgreement">I have read and agree to the terms and conditions above</label></div>
  <label for="signature">Sign Name:
    <input required type="text" id="signature" name="signature" class="fancySignature">
  </label><label for="signDate">Date:
    <input required type="date" id="signDate" name="signDate">
  </label>
  <button type="button" id="submitButton">Submit</button>
</div>

</div> <!--main-->

<script>
  // Live scale number display match input
  daScale = document.querySelector("#tenantScale"); daScale.addEventListener("change",event => { document.querySelector("#tenantScaleDisplay").innerHTML = daScale.value });
  // Sign Date set to today
  today = new Date(); day = today.getDate().toString(); month = (today.getMonth()+1).toString(); year = today.getFullYear().toString();
  if (day.length<2) { day = "0"+day }	if (month.length<2) {month = "0"+month } document.querySelector("#signDate").value = year+"-"+month+"-"+day;
  // Submission
  submitButton = document.querySelector("#submitButton"); submitButton.addEventListener("click", event => {
    ready = validateInputs(document.querySelector("#main")); 
    if (!ready) { alert("The form is not ready yet! Please review everything and make sure all fields listed as \"*Required\" are filled.") }
    else { if (confirm("Are you ready to sumbit the application?\nA review of all fields is recommended before submitting\nPlease do not close the page until you recieve a notification that it is done. It will take longer with more or larger files.")) {
      submitButton.innerHTML = "<img src='../image/loadingIcon.gif' alt='loading' style='width:20px;height:20px'>";
      toggleProcessCursor(document.documentElement);
      submitForm("/apply", (data) => {
        toggleProcessCursor(document.documentElement); alert(data["response"]); submitButton.innerHTML = "Submit";
      });
    }}
  });
  // Live income calculation
  incomeList = document.querySelectorAll("#otherIncomeAmount,#monthlySalary,#monthlySalary1");
  function calculateIncome() {
    totalIncome = 0; let i=0;
    for (i=0;i<incomeList.length;i++) { if (!isNaN(parseInt(incomeList[i].value))){totalIncome += parseInt(incomeList[i].value)} }
    document.querySelector("#totalIncome").innerHTML = totalIncome.toString();
  } 
  for (i=0;i<incomeList.length;i++) {	incomeList[i].addEventListener("change",calculateIncome) }
  // Local Storage and Validation
  inputList = document.querySelectorAll("input:not([type='file'],#signDate,#signature),textarea");
  specialList = document.querySelectorAll("input[type='file'],input#signature");
  for (i=0;i<specialList.length;i++) { specialList[i].addEventListener("change",event=>{validateInput(event.target)}) }
  for (i=0;i<inputList.length;i++) { 
    inputList[i].addEventListener("change",event => { changedInput = event.target;
      if (changedInput.type == "radio") {	name = changedInput.name; 
        value = document.querySelector("input[name='"+name+"']:checked").value;
        localStorage.setItem(name,value); 
      }	else if (changedInput.type == "checkbox") {
        if (changedInput.class="simple") { localStorage.setItem(changedInput.name,changedInput.checked) } 
        else { 
          boxList = document.querySelectorAll("#input[name='"+changedInput.name+"']"); 
          finalValue = ""; let i=0;
          for (i=0;i<boxList.length;i++) { finalValue += boxList[i].value+"," }
        }
      } else { localStorage.setItem(changedInput.name, changedInput.value) }
      validateInput(changedInput);																							 
    })
  } 
  for (i=0;i<inputList.length;i++) { daInput = inputList[i];
    if (daInput.type == "radio") { name = daInput.name;
      if (localStorage.getItem(name)!=null) {	daValue = localStorage.getItem(name);
        document.querySelector("input[name='"+name+"'][value='"+daValue+"']").checked = true 
      }
    } else { daInput.value = localStorage.getItem(daInput.name) }
    if (daInput.type == "range") { daInput.nextElementSibling.innerHTML = daInput.value }
  }
  validateInputs(document.querySelector("#main")); calculateIncome();
</script>
